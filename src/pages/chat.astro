---
import Layout from "../layouts/Layout.astro";
import { MyThread } from "../components/Chat";
import { ChatConfigSchema } from '../lib/chatConfig';

// You can override any default values here
const chatConfig = ChatConfigSchema.parse({
  systemPrompt: [{
    type: "text" as const,
    text: "Say XXX as every reply "
  }],
  welcome: {
    message: "I am Agent ONE. How can I help you today?",
    avatar: "/icon.svg",
    suggestions: [
      {
        label: "Tell me about ONE",
        prompt: "What is ONE and how can it help me?"
      },
      {
        label: "Get Started",
        prompt: "How do I get started with ONE?"
      }
    ]
  }
});
---

<Layout title="Chat">
  <div class="fixed inset-0 -ml-[80px] flex justify-center" id="chat-container">
    <div class="w-full max-w-[900px] pt-28 pl-32">
      <MyThread client:load config={chatConfig} />
    </div>
  </div>
</Layout>

<script>
  // Ensure right panel stays closed on chat page
  document.addEventListener('DOMContentLoaded', () => {
    const rightPanel = document.getElementById('right-panel');
    if (rightPanel) {
      rightPanel.classList.add('right-panel-closed');
    }
    // Hide the toggle button
    const toggleRight = document.getElementById('toggle-right');
    if (toggleRight) {
      toggleRight.style.display = 'none';
    }
  });
</script>
